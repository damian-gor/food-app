<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head th:include="fragments/base-head :: baseHead(~{::title}, ~{::script})">

    <script type="text/javascript" th:src="@{/js/user-panel.js}"></script>
    <script type="text/javascript" th:src="@{/js/meals.js}"></script>
    <script type="text/javascript" th:src="@{/js/ajax-errorHandling.js}"></script>

    <title>Meals</title>

</head>

<body>

    <div th:replace="fragments/menu :: user"></div>

    <main>

        <h1>Meals</h1>
        <p>Profile ID: <span th:text="${meals.get('0').id.profileId}"></span></p>
        <p>Date: <span th:text="${meals.get('0').id.date}"></span></p>

        <h3 class="table-tittle">Diary pages caloric statistics</h3>
        <table class="table">
            <tr>
                <td>Caloric intake goal:</td>
                <td th:text="${diaryPage.caloricIntakeGoal}"></td>
            </tr>
            <tr>
                <td>Calories left:</td>
                <td th:text="${diaryPage.kcalLeft}"></td>
            </tr>
        </table>
        <br>

        <h3 class="table-tittle">Meals list</h3>
        <table class="table">
            <tr>
                <th>Meal ID</th>
                <th>Meal's kcal</th>
                <th></th>
            </tr>
            <tr th:each="meal : ${meals}">
                <td th:text="${meal.id.mealNumber}"></td>
                <td th:text="${meal.mealKcal}"></td>
                <td><a th:href="${meal.getLink('Self').get().getHref()}"><button>Meal details</button></a></td>
            </tr>
        </table>
        <br>

        <button type="button" class="btn btn-default btn-lg" id="add-meal">
            Add new meal
            <i id="show-img" class="fas fa-plus-square" aria-hidden="true"></i>
        </button>

        <br>
        <a th:href="${meals.get('0').getLink('Back to the diary page').get().getHref()}"><button>Back to diary
                page</button></a>
        <a th:href="${meals.get('0').getLink('Go to profile food diary').get().getHref()}"><button>Back to profile's
                food
                diary</button></a>
        <a th:href="${meals.get('0').getLink('Back to the profile').get().getHref()}"><button>Back to
                profile</button></a>

    </main>

    <div th:replace="fragments/footer :: footer"></div>

</body>

</html>