<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">


<head th:include="fragments/base-head :: baseHead(~{::title}, ~{::script})">

    <script type="text/javascript" th:src="@{/js/profiles.js}"></script>
    <script type="text/javascript" th:src="@{/js/user-panel.js}"></script>
    <script type="text/javascript" th:src="@{/js/ajax-errorHandling.js}"></script>

    <title>Profiles</title>

</head>

<body>

    <div th:replace="fragments/menu :: user"></div>

    <main>

        <h1>Profiles</h1>

        <table class="table">
            <tr>
                <th>Id</th>
                <th>Nickname</th>
                <th></th>
                <th></th>
                <th></th>
            </tr>
            <tr th:each="profile : ${profiles}">
                <td th:text="${profile.id}"></td>
                <td th:text="${profile.name}"></td>
                <td><a th:href="${profile.getLink('Self').get().getHref()}"><button>See profile</button></a></td>
                <td><a
                        th:href="${profile.getLink('Go to profile details').get().getHref()}"><button>Details</button></a>
                </td>
                <td><a th:href="${profile.getLink('Go to profile food diary').get().getHref()}"><button>Food
                            Diary</button></a></td>
            </tr>
        </table>

        <div id="postresponseDiv"></div>

        <button id="btn-add-profile">Add new profile</button>
        <div class="container" id="profile-form-container" style="display: none">
            <form id="profileForm">
                <div class="form-group">
                    <label for="name">Profile name:</label> <input type="text" class="form-control" id="name"
                        placeholder="Enter profile name" name="name">
                </div>
                <div class="form-group">
                    <label for="diet">Diet:</label>
                    <select name="diet" id="diet">
                        <option value="none">none</option>
                        <option th:each="diet : ${T(com.damgor.foodapp.model.enums.Diet).values()}" th:value="${diet}"
                            th:text="${diet.displayName}"></option>
                    </select>
                    <p id="desc-diet" style="font-size: 14px; font-style: italic">Select diet to get description</p>
                </div>
                <div class="form-group">
                    <label for="cuisine">Cuisine:</label>
                    <select name="cuisine" id="cuisine">
                        <option value="none">none</option>
                        <option th:each="cuisine : ${T(com.damgor.foodapp.model.enums.Cuisine).values()}"
                            th:value="${cuisine}" th:text="${cuisine.displayName}"></option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="intolerance">Intolerance:</label>
                    <select name="intolerance" id="intolerance">
                        <option value="none">none</option>
                        <option th:each="intolerance : ${T(com.damgor.foodapp.model.enums.Intolerance).values()}"
                            th:value="${intolerance}" th:text="${intolerance.displayName}"></option>
                    </select>
                </div>

                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
        </div>

    </main>

    <div th:replace="fragments/footer :: footer"></div>

    <script th:inline="javascript">
        var dietDescriptionsMap = /*[[${T(com.damgor.foodapp.model.enums.Diet).values()[0].descriptionMap}]]*/ null;
    </script>

</body>

</html>